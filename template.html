<!-- template.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Envelo.love ‚Äî Customize Your Envelope</title>
  <meta name="description" content="Easily personalize your envelope design and generate print-ready PDFs. Designed for weddings, events, and personal mailings in the U.S.">
  <meta name="keywords" content="envelope design, custom envelopes, personalized wedding mail, PDF envelopes, address merge, mail merge envelope tool">
  <meta name="author" content="Envelo.love">
  <meta name="google-site-verification" content="mGVjSzmcquqeMHCNbFsxFT8ZbSpM4w3EyZrtbC7wqGU" />
  <meta property="og:title" content="Customize Your Envelope ‚Äî Envelo.love">
  <meta property="og:description" content="Create beautiful envelopes online. Upload your address list and generate print-ready designs for special occasions.">
  <meta property="og:image" content="https://envelo.love/favicon_envelo.png">
  <meta property="og:url" content="https://envelo.love">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#ffffff">
  <link rel="icon" type="image/png" href="/favicon_envelo.png">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://pitchprint.io/rsc/js/client.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .btn { padding: 12px 20px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    .container { max-width: 800px; margin: 40px auto; font-family: sans-serif; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="container">
    <a href="/" class="inline-block text-blue-600 mb-4 hover:underline">‚Üê Back to catalog</a>
    <h1 class="text-2xl font-bold mb-6">Customize Your Envelope</h1>

    <p>
      <a href="https://drive.google.com/drive/folders/1K0ZmsGyMDNHbkHdtOQkFBcIM92MAOhXY?usp=sharing" class="btn" target="_blank">
        üì• Download CSV Template
      </a>
    </p>

    <button class="btn mt-4" id="launch_btn" disabled>Open Editor</button>

    <div id="pp_loader_div" class="mt-6">Loading PitchPrint...</div>
    <div id="pp_preview_div" class="mt-4"></div>
  </div>

  <script>
    const _launchButton = document.getElementById('launch_btn');
    const _previewDiv = document.getElementById('pp_preview_div');
    const _loaderDiv = document.getElementById('pp_loader_div');

    const urlParams = new URLSearchParams(window.location.search);
    const designId = urlParams.get('design') || 'defc64a17de41a7e03fbfddfa23e1463bc';

    const ppclient = new PitchPrintClient({
      apiKey: 'key_30f5980013fbc8f44c3bf75a89ece068',
      designId: designId,
      custom: true,
      isvx: true
    });

    ppclient.on('app-validated', () => {
      _launchButton.removeAttribute('disabled');
      _launchButton.onclick = () => ppclient.showApp();
      _loaderDiv.classList.add('hidden');
    });

    ppclient.on('project-saved', (_val) => {
      const _data = _val.data;
      if (_data?.previews?.length) {
        _previewDiv.innerHTML = _data.previews.map(
          (img) => `<img src="${img}" style="max-width:100%;margin:10px 0;" />`
        ).join('');
      }
    });
  </script>
</body>
</html>
